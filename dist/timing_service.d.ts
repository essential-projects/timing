import { IEventAggregator } from '@process-engine-js/event_aggregator_contracts';
import { ExecutionContext, IIamService } from '@process-engine-js/core_contracts';
import { ITimingService, ITimingRule } from '@process-engine-js/timing_contracts';
import { IDatastoreService } from '@process-engine-js/data_model_contracts';
import { IFactoryAsync } from 'addict-ioc';
import * as moment from 'moment';
export declare class TimingService implements ITimingService {
    private _jobs;
    private _datastoreServiceFactory;
    private _datastoreService;
    private _iamService;
    private _eventAggregator;
    config: any;
    constructor(datastoreServiceFactory: IFactoryAsync<IDatastoreService>, iamService: IIamService, eventAggregator: IEventAggregator);
    private getDatastoreService();
    private readonly iamService;
    private readonly eventAggregator;
    initialize(): Promise<void>;
    cancel(timerId: string, context: ExecutionContext): Promise<void>;
    once(date: moment.Moment, eventName: string, context: ExecutionContext): Promise<string>;
    periodic(rule: ITimingRule, eventName: string, context: ExecutionContext): Promise<string>;
    private _timerElapsed(timerId, eventName);
    private _getContext();
    private _getJob(timerId);
    private _cacheJob(timerId, job);
    private _removeJob(timerId);
    private _getTimerEntityType();
    private _getTimerEntityById(timerId, context);
    private _removeTimerEntity(timerId, context);
    private _createTimer(timerType, timerDate, timerRule, eventName, context);
    private _createJob(timerId, timerValue, eventName);
    private _createTimerEntity(timerData, context);
    private _restorePersistedJobs(context);
}
